# AIM - AI-Collaboration-Management Docker Compose
#
# Usage:
#   PROJECT_PATH=/path/to/your/project docker compose up -d
#
# Or set PROJECT_PATH in .env file

services:
  aim:
    build: .
    image: aim
    container_name: aim-session
    stdin_open: true
    tty: true
    volumes:
      # Mount user's project (set PROJECT_PATH env var or use default)
      - ${PROJECT_PATH:-.}:/project
      # Persistent state for boards
      - aim-state:/aim/state
      # Mount SSH keys for git operations (read-only)
      - ${HOME}/.ssh:/root/.ssh:ro
      # Mount git config for user identity
      - ${HOME}/.gitconfig:/root/.gitconfig:ro
    environment:
      - GIT_AUTHOR_NAME=${GIT_AUTHOR_NAME:-AIM User}
      - GIT_AUTHOR_EMAIL=${GIT_AUTHOR_EMAIL:-aim@local}
    working_dir: /project
    command: shell

volumes:
  aim-state:
    name: aim-state
